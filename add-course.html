<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>Create Course</title>
    <link rel="stylesheet" href="style.css">
</head>

<html>
<body>
<h2>Create New Course</h2>

<div class="card">
    <input id="title" placeholder="Course Title">
    <input id="category" placeholder="Category (e.g. Database)">
    <input id="price" type="number" placeholder="Price">
    <button onclick="createCourse()">Create Course</button>
</div>
<button onclick="add()">Add</button>
<nav>
    <a href="index.html">Browse Courses</a>
    <a href="add-course.html">Create Course</a>
    <a href="courses.html">All Courses</a>
    <a href="my-courses.html">My Courses</a>
</nav>
<script>
    function createCourse() {
        fetch("http://localhost:5000/api/courses", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer " + localStorage.getItem("token")
            },
            body: JSON.stringify({
                title: document.getElementById("title").value,
                category: document.getElementById("category").value,
                price: document.getElementById("price").value
            })
        })
            .then(res => res.json())
            .then(data => {
                if (data._id) {
                    alert("Course created successfully!");
                    window.location.href = "my-courses.html";
                } else {
                    alert(data.message || "Failed to create course");
                }
            });
    }
</script>
<script>
async function add() {
  await fetch("http://localhost:5000/api/courses", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": "Bearer " + localStorage.getItem("token")
    },
    body: JSON.stringify({
      title: title.value,
      category: category.value,
      price: price.value
    })
  });

  alert("Course created");
}
</script>
</body>
</html>
